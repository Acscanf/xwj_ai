<!DOCTYPE html>
<html lang="zh">

<head>
    <meta charset="UTF-8" />
    <title>HTML5 æ‹–æ‹½å®æˆ˜</title>
    <style>
        .draggable {
            width: 100px;
            height: 100px;
            background-color: #61dafb;
            border: 2px dashed #333;
            margin: 10px;
            text-align: center;
            line-height: 100px;
            cursor: move;
            user-select: none;
            /* é˜²æ­¢æ–‡å­—è¢«é€‰ä¸­ */
        }

        .dropzone {
            width: 200px;
            height: 200px;
            border: 3px dashed #ccc;
            margin: 20px;
            padding: 10px;
            background-color: #f9f9f9;
            text-align: center;
            line-height: 200px;
            font-weight: bold;
        }

        .highlight {
            border-color: #00aaff;
            background-color: #e6f7ff;
        }
    </style>
</head>

<body>
    <h1>ğŸ‰ æ‹–æ‹½æµ‹è¯•</h1>

    <!-- æ‹–æ‹½æº -->
    <div class="draggable" id="dragElem" draggable="true">
        æ‹–æˆ‘ï¼
    </div>

    <!-- æŠ•æ”¾åŒº -->
    <div class="dropzone" id="dropZone">
        æ”¾è¿™é‡Œ ğŸ‘‡
    </div>

    <script>
        // è·å– DOM å…ƒç´ 
        const dragElem = document.getElementById('dragElem');
        const dropZone = document.getElementById('dropZone');

        // 1ï¸âƒ£ æ‹–æ‹½å¼€å§‹ï¼šè®¾ç½®è¦ä¼ é€’çš„æ•°æ®
        dragElem.addEventListener('dragstart', (e) => {
            console.log('ğŸš€ å¼€å§‹æ‹–åŠ¨ï¼');

            // ğŸ“¦ ä½¿ç”¨ DataTransfer å­˜å‚¨æ•°æ®
            e.dataTransfer.setData('text/plain', 'æˆ‘æ˜¯è¢«æ‹–åŠ¨çš„æ•°æ®'); // æ ¼å¼, æ•°æ®
            e.dataTransfer.setData('text/html', '<strong>HTMLå†…å®¹</strong>');

            // ğŸ¨ å¯é€‰ï¼šè®¾ç½®æ‹–åŠ¨æ—¶çš„å›¾æ ‡ï¼ˆå¯ä»¥æ˜¯å›¾ç‰‡ï¼‰
            // e.dataTransfer.setDragImage(è‡ªå®šä¹‰å›¾ç‰‡, xåç§», yåç§»);

            // ğŸ’„ æ‹–åŠ¨æ—¶ç»™æºå…ƒç´ åŠ ä¸ªé€æ˜æ•ˆæœ
            dragElem.style.opacity = '0.5';
        });

        // 2ï¸âƒ£ æ‹–åŠ¨ç»“æŸï¼šæ¢å¤æ ·å¼
        dragElem.addEventListener('dragend', () => {
            console.log('ğŸ›‘ æ‹–åŠ¨ç»“æŸ');
            dragElem.style.opacity = '1'; // æ¢å¤ä¸é€æ˜
        });

        // 3ï¸âƒ£ è¿›å…¥æŠ•æ”¾åŒº
        dropZone.addEventListener('dragenter', (e) => {
            e.preventDefault(); // å¿…é¡»é˜»æ­¢é»˜è®¤
            console.log('ğŸšª è¿›å…¥æŠ•æ”¾åŒº');
            dropZone.classList.add('highlight'); // é«˜äº®
        });

        // 4ï¸âƒ£ åœ¨æŠ•æ”¾åŒºä¸Šç§»åŠ¨ï¼ˆå…³é”®ï¼ï¼‰
        dropZone.addEventListener('dragover', (e) => {
            e.preventDefault(); // âš ï¸ å¿…é¡»é˜»æ­¢é»˜è®¤è¡Œä¸ºï¼Œå¦åˆ™ drop ä¸ä¼šè§¦å‘ï¼
            // e.dataTransfer.dropEffect = 'move'; // å¯è®¾ç½®å…‰æ ‡æ ·å¼ï¼š'copy', 'move', 'link'
        });

        // 5ï¸âƒ£ ç¦»å¼€æŠ•æ”¾åŒº
        dropZone.addEventListener('dragleave', () => {
            console.log('ğŸšª ç¦»å¼€æŠ•æ”¾åŒº');
            dropZone.classList.remove('highlight'); // å–æ¶ˆé«˜äº®
        });

        // 6ï¸âƒ£ æŠ•æ”¾ï¼æ‰§è¡Œæ“ä½œ
        dropZone.addEventListener('drop', (e) => {
            e.preventDefault(); // é˜»æ­¢é»˜è®¤è¡Œä¸ºï¼ˆæ¯”å¦‚æ‰“å¼€é“¾æ¥ï¼‰
            console.log('ğŸ“¥ æŠ•æ”¾æˆåŠŸï¼');

            // âœ¨ ç§»é™¤é«˜äº®
            dropZone.classList.remove('highlight');

            // ğŸ“¥ è·å–æ‹–æ‹½ä¼ é€’çš„æ•°æ®
            const data = e.dataTransfer.getData('text/plain');
            console.log('æ¥æ”¶åˆ°çš„æ•°æ®:', data);

            // ğŸ‰ æ‰§è¡Œä½ çš„ä¸šåŠ¡é€»è¾‘ï¼Œæ¯”å¦‚ï¼š
            dropZone.innerHTML = `<p style="color: green;">âœ… æˆåŠŸæ¥æ”¶ï¼š<br>${data}</p>`;
            dropZone.style.backgroundColor = '#e6ffe6';
        });
    </script>
</body>

</html>